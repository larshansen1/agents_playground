# ruff: noqa: PLC0415, PLR0912, PLR0915
# PLC0415: Local imports required to avoid circular dependencies
# PLR0912/PLR0915: Complex state machine logic justifies higher branch/statement counts
